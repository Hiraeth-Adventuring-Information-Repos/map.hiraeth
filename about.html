<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Hiraeth</title>

    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <!-- Google Font: EB Garamond -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

    <style>
        /* --- Theme Variables --- */
        :root {
            /* Light Mode */
            --bg-base: #fdfaf6;
            --bg-pattern-start: #fdfaf6;
            --bg-pattern-end: #f4f0eb;
            
            --text-primary: #5c3a35; /* Rich Brown */
            --text-secondary: #8c6b5d;
            --text-highlight: #d4a36a; /* Gold/Bronze */
            
            --glass-bg: rgba(253, 250, 246, 0.85);
            --glass-border: rgba(140, 107, 93, 0.2);
            --glass-shadow: 0 8px 32px rgba(92, 58, 53, 0.1);
            
            --hero-gradient: linear-gradient(135deg, #6b2c25 0%, #3e1b17 100%);
            --hero-text: #fdfaf6;
            
            --key-bg: #fdfaf6;
            --key-border: #dcd3c8;
            --key-shadow: 0 2px 0 #bcaaa4;
            --key-text: #5c3a35;

            --font-main: 'EB Garamond', serif;
        }

        body.dark-theme {
            /* Dark Mode */
            --bg-base: #2c2a3a;
            --bg-pattern-start: #2c2a3a;
            --bg-pattern-end: #1f1d2b;

            --text-primary: #e8e6f2;
            --text-secondary: #a09cc8;
            --text-highlight: #706de1; /* Magic Blue */

            --glass-bg: rgba(44, 42, 58, 0.85);
            --glass-border: rgba(112, 109, 225, 0.2);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);

            --hero-gradient: linear-gradient(135deg, #1f1d2b 0%, #3a384c 100%);
            --hero-text: #e8e6f2;

            --key-bg: #3a384c;
            --key-border: #524f6c;
            --key-shadow: 0 2px 0 #1f1d2b;
            --key-text: #e8e6f2;
        }

        /* --- Base Reset & Typography --- */
        * { box-sizing: border-box; }
        
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: var(--font-main);
            color: var(--text-primary);
            background-color: var(--bg-base);
            /* Subtle topographic-like radial gradient pattern */
            background-image: radial-gradient(circle at 10% 20%, var(--bg-pattern-end) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, var(--bg-pattern-end) 0%, transparent 20%);
            transition: background 0.3s ease, color 0.3s ease;
            line-height: 1.7;
        }

        /* --- Layout Containers --- */
        .page-wrapper {
            max-width: 960px;
            margin: 0 auto;
            padding: 40px 20px 80px;
        }

        .card {
            background-color: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: var(--glass-shadow);
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }

        /* --- Hero Section --- */
        .hero-header {
            text-align: center;
            margin-bottom: 50px;
            padding: 60px 20px;
            background: var(--hero-gradient);
            border-radius: 16px;
            color: var(--hero-text);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        /* Decorative decorative circle in hero */
        .hero-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -10%;
            width: 50%;
            padding-bottom: 50%;
            border-radius: 50%;
            background: rgba(255,255,255,0.05);
            pointer-events: none;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 1.4rem;
            font-style: italic;
            opacity: 0.9;
            margin-top: 10px;
            font-weight: 400;
        }

        /* --- Typography Details --- */
        h2 {
            font-size: 2rem;
            margin-top: 0;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 15px;
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--text-highlight);
            margin-top: 25px;
        }

        p {
            font-size: 1.15rem;
            margin-bottom: 20px;
        }

        /* Drop Cap for Lore */
        .lore-text p:first-of-type::first-letter {
            float: left;
            font-size: 4rem;
            line-height: 0.8;
            padding-right: 12px;
            padding-top: 4px;
            color: var(--text-highlight);
            font-weight: 700;
        }

        /* --- How To Use Grid --- */
        .guide-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
        }

        @media (min-width: 768px) {
            .guide-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .guide-section ul {
            padding-left: 20px;
            list-style-type: none;
        }
        
        .guide-section li {
            margin-bottom: 12px;
            position: relative;
        }

        .guide-section li::before {
            content: 'â€¢';
            color: var(--text-highlight);
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        /* --- Keyboard Shortcuts Table --- */
        .shortcut-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 10px 20px;
            align-items: center;
            margin-top: 15px;
        }

        kbd {
            display: inline-block;
            padding: 4px 10px;
            font-family: monospace; /* Consolas or similar for clarity */
            font-size: 0.9rem;
            font-weight: bold;
            line-height: 1;
            color: var(--key-text);
            vertical-align: middle;
            background-color: var(--key-bg);
            border: 1px solid var(--key-border);
            border-radius: 6px;
            box-shadow: var(--key-shadow);
            min-width: 30px;
            text-align: center;
        }

        .shortcut-desc {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* --- Links --- */
        a {
            color: var(--text-secondary);
            text-decoration: underline;
            transition: color 0.2s ease;
        }
        a:hover {
            color: var(--text-primary);
        }

        .back-link-wrapper {
            text-align: center;
            margin-top: 40px;
        }
        
        .back-button {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--bg-base);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            color: var(--text-highlight);
            border-color: var(--text-highlight);
        }

        /* --- Theme Toggle Switch --- */
        .theme-switch-container {
             position: fixed;
             bottom: 20px;
             left: 20px;
             z-index: 100;
             display: flex;
             align-items: center;
             padding: 10px 15px;
             background-color: var(--glass-bg);
             backdrop-filter: blur(10px);
             -webkit-backdrop-filter: blur(10px);
             border: 1px solid var(--glass-border);
             border-radius: 30px;
             box-shadow: 0 4px 12px rgba(0,0,0,0.15);
             transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .theme-switch-container span {
            margin-right: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .theme-switch {
            position: relative;
            display: inline-block;
            width: 46px;
            height: 24px;
            flex-shrink: 0;
        }
        
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        
        input:checked + .slider { background-color: var(--text-highlight); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* --- Embed Tool Styles --- */
        .embed-tool-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .tool-input {
            flex-grow: 1;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.5);
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-primary);
        }

        body.dark-theme .tool-input {
            background: rgba(0, 0, 0, 0.2);
        }

        .tool-btn {
            padding: 12px 20px;
            border-radius: 8px;
            border: none;
            background: var(--text-highlight);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .tool-btn:hover {
            opacity: 0.9;
        }

        .result-box {
            background: rgba(0, 0, 0, 0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        body.dark-theme .result-box {
            background: rgba(255, 255, 255, 0.05);
        }

        .result-box.hidden {
            display: none;
        }

        #embed-url {
            font-family: monospace;
            word-break: break-all;
            margin-right: 10px;
            font-size: 0.95rem;
        }

        .copy-btn {
            background: none;
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            padding: 5px 10px;
            cursor: pointer;
            color: var(--text-primary);
        }

        .copy-btn:hover {
            background: rgba(0,0,0,0.1);
        }
        
        body.dark-theme .copy-btn:hover {
             background: rgba(255,255,255,0.1);
        }

    </style>
</head>
<body>

    <!-- Theme Toggle -->
    <div class="theme-switch-container">
         <span>Dark Mode</span>
         <label class="theme-switch" for="theme-checkbox">
             <input type="checkbox" id="theme-checkbox" />
             <div class="slider"></div>
         </label>
    </div>

    <div class="page-wrapper">
        
        <!-- Hero Header -->
        <header class="hero-header">
            <h1 class="hero-title">About Hiraeth</h1>
            <div class="hero-subtitle">A Digital Atlas of a Living World</div>
        </header>

        <!-- Lore Section -->
        <section class="card lore-text">
            <h2>The World</h2>
            <p>
                Hiraeth is a realm born of imagination, nurtured through more than a decade of shared stories and dedicated world-building by its creator and founding Dungeon Master Jax SN Johnson. Its landscapes, cities, and hidden corners have echoed with the footsteps of heroes and the schemes of villains, meticulously charted and brought to life over countless campaigns.
            </p>
            <p>
                This interactive atlas is more than just a collection of locations; it is a living window into a world that has breathed and evolved. What began as a setting for short stories in middle school and fun campaigns in high schoolâ€”full of hand-drawn sketches shared around the gaming tableâ€”has grown into this digital archive. It is born from a deep passion for this cherished setting and the collaborative magic of tabletop roleplaying.
            </p>
            <p>
                Here, you are invited to delve into the details of bustling port cities like Rockdrift, trace the paths of ancient roads in Icebeach, or uncover the secrets whispered in forgotten ruins in Astrousia. These maps are resources designed to spark imagination, provide context, and help you visualize the stage upon which your own Hiraeth adventures will unfold.
            </p>
            <p>
                Explore. Discover. The journey awaits.
            </p>
        </section>

        <!-- Guide Section -->
        <section class="card">
            <h2>Traveler's Guide</h2>
            <div class="guide-grid">
                
                <!-- Left Column: Interactions -->
                <div class="guide-section">
                    <h3>Navigation & Interaction</h3>
                    <p>Move freely through the map by clicking and dragging. Use your mouse wheel or trackpad to zoom in for detail or out for an overview.</p>
                    <ul>
                        <li><strong>Single Click:</strong> Identify a location or select a point for measurement.</li>
                        <li><strong>Double Click:</strong> Lock the coordinate display to a specific point (useful for copying exact coordinates).</li>
                        <li><strong>Click Links:</strong> Shareable links to specific Points of Interest (POIs) can be copied by clicking the share icon in any popup.</li>
                    </ul>

                    <h3>Toolbar Controls</h3>
                    <ul>
                        <li><strong>Sidebar:</strong> Toggle the map list on the left.</li>
                        <li><strong>Markers (Eye Icon):</strong> Show or hide all map markers and regions for a clear view of the terrain.</li>
                        <li><strong>Filters:</strong> Open the filter panel to toggle specific categories of locations.</li>
                        <li><strong>Ruler:</strong> Activate the distance measurement tool. Click multiple points to measure a path; double-click to finish.</li>
                        <li><strong>Sound:</strong> Toggle ambient background audio (themed for Day/Night modes).</li>
                    </ul>
                </div>

                <!-- Right Column: Shortcuts -->
                <div class="guide-section">
                    <h3>Keyboard Shortcuts</h3>
                    <p>Master these keys to navigate the realm swiftly.</p>
                    
                    <div class="shortcut-grid">
                        <kbd>+</kbd> <span class="shortcut-desc">Zoom In</span>
                        <kbd>-</kbd> <span class="shortcut-desc">Zoom Out</span>
                        <kbd>S</kbd> <span class="shortcut-desc">Toggle Sidebar</span>
                        <kbd>T</kbd> <span class="shortcut-desc">Toggle Dark/Light Mode</span>
                        <kbd>M</kbd> <span class="shortcut-desc">Measurement Tool</span>
                        <kbd>H</kbd> <span class="shortcut-desc">Hide/Show Markers</span>
                        <kbd>F</kbd> <span class="shortcut-desc">Filter Panel</span>
                        <kbd>/</kbd> <span class="shortcut-desc">Search</span>
                        <kbd>?</kbd> <span class="shortcut-desc">Show Help Modal</span>
                        <kbd>Esc</kbd> <span class="shortcut-desc">Close Popups / Cancel Tool</span>
                    </div>
                </div>

            </div>
        </section>

        <!-- Tools Section (Commented Out)
        <section class="card">
            <h2>Tools</h2>
            <div class="embed-tool-container">
                <h3>Embed Link Generator</h3>
                <p>Create a simplified link for embedding maps on other websites. This version hides the sidebar, search bar, and other UI controls, providing a clean viewport focused on the map content.</p>
                <div class="input-group">
                    <input type="text" id="embed-input" placeholder="Paste your map link here..." class="tool-input">
                    <button id="generate-embed-btn" class="tool-btn">Generate Link</button>
                </div>
                <div id="embed-result" class="result-box hidden">
                    <span id="embed-url"></span>
                    <button id="copy-embed-btn" class="copy-btn" title="Copy to Clipboard">ðŸ“‹ Copy</button>
                </div>
            </div>
        </section>
        -->

        <!-- Footer / Back Link -->
        <div class="back-link-wrapper">
            <a href="index.html" class="back-button">&laquo; Return to Map Viewer</a>
        </div>

    </div>

    <script>
        // --- Theme Toggle Logic ---
        const themeToggle = document.getElementById('theme-checkbox');
        const bodyElement = document.body;

        function applyTheme(theme) {
            if (theme === 'dark') {
                bodyElement.classList.add('dark-theme');
                themeToggle.checked = true;
            } else {
                bodyElement.classList.remove('dark-theme');
                themeToggle.checked = false;
            }
        }

        themeToggle.addEventListener('change', () => {
            const newTheme = themeToggle.checked ? 'dark' : 'light';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });

        // --- Load Saved Theme on Page Load ---
        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);

        /* --- Embed Link Generator Logic (Commented Out) ---
        const generateBtn = document.getElementById('generate-embed-btn');
        const embedInput = document.getElementById('embed-input');
        const resultBox = document.getElementById('embed-result');
        const resultUrl = document.getElementById('embed-url');
        const copyBtn = document.getElementById('copy-embed-btn');

        generateBtn.addEventListener('click', () => {
            const inputValue = embedInput.value.trim();
            if (!inputValue) return;

            try {
                const url = new URL(inputValue);
                
                // Construct new search params to ensure 'embed' is first
                const oldParams = url.searchParams;
                const newParams = new URLSearchParams();
                
                // 1. Add embed flag first
                newParams.set('embed', 'true');

                // 2. Add remaining valid params
                // Only exclude 'embed' itself to avoid duplication
                const excluded = ['embed'];
                
                oldParams.forEach((value, key) => {
                    if (!excluded.includes(key)) {
                        newParams.append(key, value);
                    }
                });

                // Update URL with new params
                url.search = newParams.toString();

                // Note: We explicitly preserve 'poi', 'region', 'line', and the hash (mapId)
                // so specific features remain linked.

                resultUrl.textContent = url.toString();
                resultBox.classList.remove('hidden');
                
                // Reset copy button
                copyBtn.innerHTML = 'ðŸ“‹ Copy';
            } catch (e) {
                alert("Invalid URL. Please paste a full link (e.g., https://atlas.hiraeth.com/...)");
            }
        });

        copyBtn.addEventListener('click', () => {
            const textToCopy = resultUrl.textContent;
            navigator.clipboard.writeText(textToCopy).then(() => {
                copyBtn.innerHTML = 'âœ” Copied!';
                setTimeout(() => {
                    copyBtn.innerHTML = 'ðŸ“‹ Copy';
                }, 2000);
            });
        });
        */
    </script>

</body>
</html>