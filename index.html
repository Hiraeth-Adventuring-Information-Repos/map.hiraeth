<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:description" content="Explore interactive maps, discover points of interest, and measure distances in Hiraeth!">

    <meta property="og:image" content="https://maps.hiraeth.wiki/images/hiraeth-maps-preview.png">
    <meta property="og:url" content="https://maps.hiraeth.wiki/">
    <title>HAG Interactive World Map Viewer</title>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/Control.MiniMap.min.css">
</head>
<body>
    <div class="container">
        <div id="sidebar">
            <h2>Select Map</h2>
            <ul id="map-list">
                </ul>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="theme-checkbox">
                    <input type="checkbox" id="theme-checkbox" />
                    <div class="slider round"></div>
                </label>
                <span>Dark Mode</span>
            </div>
        </div>
        <div id="map-container">
            <button id="toggle-sidebar-btn" title="Collapse Sidebar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            </button>
            <div id="map"></div>

            <div id="map-blurb"></div>
            <button id="toggle-blurb-btn" class="map-control-button leaflet-control" title="Toggle Map Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
            </button>

            <div id="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <div class="loading-text">Loading Map Data...</div>
                <div class="progress-container">
                    <div class="progress-bar"></div>
                </div>
            </div>

            <button id="toggle-markers-btn" title="Toggle Markers" class="map-control-button leaflet-control">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
            </button>
            <button id="toggle-filters-btn" title="Toggle Filters" class="map-control-button leaflet-control">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
            </button>
            <button id="measure-tool-btn" title="Measure Distance" class="map-control-button leaflet-control">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.8 13.598 10.402 2.201a3 3 0 0 0-4.243 0L2.2 6.157a3 3 0 0 0 0 4.243l11.398 11.398a3 3 0 0 0 4.243 0l3.957-3.957a3 3 0 0 0 0-4.243Z"/><path d="m6 10 2-2"/><path d="m10 14 2-2"/><path d="m14 18 2-2"/></svg>
            </button>
            <button id="toggle-sound-btn" title="Toggle Sound" class="map-control-button leaflet-control">
                <span id="sound-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" x2="17" y1="9" y2="15"/><line x1="17" x2="23" y1="9" y2="15"/></svg>
                </span>
            </button>
            <button id="toggle-coords-btn" title="Toggle Coordinate Display" class="map-control-button leaflet-control" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
            </button>

            <div id="poi-filter-container" class="leaflet-control">
                 <h3>Filter by Type:</h3>
                 <div class="filter-item">
                     <input type="checkbox" id="filter-toggle-all" checked>
                     <label for="filter-toggle-all">Show All / Hide All</label>
                 </div>
                 </div>
            <div id="search-control-container" class="leaflet-control">
                <input type="search" id="poi-search-input" placeholder="Search locations...">
            </div>
            <div id="search-results-container" class="leaflet-control">
                </div>
            <div id="bottom-link-bar">
                <a href="https://jsnj.link/maps-to-wiki" target="_blank">Wiki</a> |
                <a href="https://jsnj.link/maps-blog-post" target="_blank">Blog</a> |
                <a href="about.html" class="back-link">About </a> |
                <a href="https://jsnj.link/map-hiraeth-source" target="_blank">Source </a>
            </div>
        </div>
    </div>

    <audio id="light-ambient" loop preload="auto"> <source src="sounds/gentle-winds.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <audio id="dark-ambient" loop preload="auto"> <source src="sounds/night-ambient.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

    <script src="js/libs/Control.MiniMap.min.js"></script>
    <script src="js/app.js"></script>

    <div id="wip-popup">
        <p>This site is a Work in Progress</p>
        <p>Markers, Names, and Map May Not Be Acurate</p>
    </div>
    <div id="keyboard-help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background-color: var(--bg-secondary); color: var(--text-primary); padding: 25px; border-radius: 8px; width: 90%; max-width: 500px; box-shadow: 0 5px 20px var(--shadow-color); position: relative;">
            <button id="close-keyboard-help-btn" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 1.5rem; color: var(--text-primary); cursor: pointer;">&times;</button>
            <h2 style="margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 10px;">Keyboard Shortcuts</h2>
            <ul style="list-style: none; padding: 0;">
                <li style="margin-bottom: 8px;"><kbd>+</kbd> / <kbd>=</kbd> : Zoom In</li>
                <li style="margin-bottom: 8px;"><kbd>-</kbd> : Zoom Out</li>
                <li style="margin-bottom: 8px;"><kbd>s</kbd> : Toggle Sidebar</li>
                <li style="margin-bottom: 8px;"><kbd>t</kbd> : Toggle Theme</li>
                <li style="margin-bottom: 8px;"><kbd>m</kbd> : Toggle Measurement Tool</li>
                <li style="margin-bottom: 8px;"><kbd>h</kbd> : Toggle Markers/Regions</li>
                <li style="margin-bottom: 8px;"><kbd>f</kbd> : Toggle Filters Panel</li>
                <li style="margin-bottom: 8px;"><kbd>/</kbd> : Focus Search Bar</li>
                <li style="margin-bottom: 8px;"><kbd>Esc</kbd> : Close Popup / Panel / Cancel Measurement</li>
                <li style="margin-bottom: 8px;"><kbd>?</kbd> : Show/Hide this Help</li>
                </ul>
        </div>
    </div>

</body>
</html>
